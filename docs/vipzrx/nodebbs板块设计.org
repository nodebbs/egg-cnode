* 0
工作进展可以集成到 nodebbs板块设计 中 这是org-mode的优势
板块设计,可以当作用户使用指南,也可以当作是网站开发项目
功能比较多,难的是实现的先后顺序,以及调动更多人参与进来
板块设计又可以写在主文件中,记录各种操作记录.文件越写越大

todo list.
正在进行的工作
结合github issue中的状态
结合cnode之前版本 github上的issue和提交记录,确定开发顺序
先做功能,后完善UI
todo的顺序,按照需求程度,和自己能力,以及实现的复杂度

每一个功能,都做成插件形式.做一个最小的内核,其他的以插件形式集成,可以任意关闭,像debian那样有包管理工具,解决依赖问题

* DONE fork egg-cnode源码
  CLOSED: [2018-05-09 Wed 14:19]
  - State "DONE"       from "STARTED"    [2018-05-09 Wed 14:19]
 [[file:fork-egg-cnode.org][fork-egg-cnode]]
* DONE 添加自己的readme
  CLOSED: [2018-05-09 Wed 14:25]
  - State "DONE"       from "STARTED"    [2018-05-09 Wed 14:25]
 [[file:github%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%B7%B1%E7%9A%84readme.org][github添加自己的readme]]

注册帐号
替换成nodebbs
* 修改readme文件中持续集成设置
** README.md
保留根目录下的README.md
说明文件使用.github/readme.md

** Dockerfile
** docker-compose.yml
** docker-compose.dev.yml
** appveyor.yml

* 下载virtualbox
** 使用版本
** 下载地址
*** 官方下载地址
*** 百度网盘
* 安装virtualbox
** windows
** linux
** mac
* 配置virtualbox
* 虚拟机
导出

* 安装debian

首次配置
* 安装docker
* 安装nodejs
* 安装redis
* 安装mongose
* 安装vagrant
* vscode安装配置
安装
常用插件
日常操作
建议一个讨论组 开一个repo 整理相关文章,issue交流问题
 
* 腾讯云上部署egg-cnode
debian
docker

** nodebbs_egg-cnode/tutorials/Docker.md

* 上线nodebbs.cn
域名
alinode
7牛cdn
* 申请腾讯免费企业邮箱
@nodebbs.cn

划分常用邮件分组

* nodebbs注册会员或者github授权登录
登录的时候,可以创建一个新的帐号
邮箱 用户名 昵称

* 过一遍egg-cnode源码
找到研究egg-cnode的人,一起研究

使用到的技术栈

源码文件按照功能划分

核心文件解析

完善注释
注释即代码 中文注释
cndoe的源码,学习的时候,注释直接在当前行后面添加.这样不会破坏原先代码的行数
使用差异文件查看时,也是显示在一行中
注释直接注释在代码中,可以及时跟随版本
注释也可以及时跟随代码的变化

按照文件为单位,指定维护人
写在文件开头 反馈地址github的issue @帐号

** 
** package.json

* 组建各个team
team内部实行轮岗制度,按照月为单位一次担任team负责人

team清单

运维
文档
论坛管理运营团队
论坛功能模块负责人
源码单个文件负责人

技术栈顾问
 webpack
 alinode
 debian
 vscode

* 完善自动集成测试
配合本地服务器
使用网上vps中转,桥接github的自动集成

* 修改发帖编辑器
现在编辑器 支持格式少 编辑删除字母有问题,在cnode上提过,也看到别人提,没有修复

stackedit 支持表格 ascii图
有js文件

写工具将markdown转换成cndoe支持的语法
这个应该有现成工具

发布到cnode中
这个环节用nodejs写个命令行工具,供第三方调用

可以将这个工具做到服务器上,上传markdown文件,可以在本地预览.预览之后,发布

本地预览,需要客户端上操作

* 论坛搜索添加百度搜索
site:nodebbs.cn xxx

* 发图流程优化
直接拖拽到编辑框,就返回填写好的markdown格式
* 发送gif图片
** 制作gif工具
** 解析gif
* 完善发帖功能
** 发帖权限
** 类型
*** 提问
   不强制悬赏 悬赏金额 着急或者需要好的答案,可以追加悬赏
*** 悬赏
   设置悬赏金额
   其他人也想得到相关答案,也可以追加悬赏
   悬赏有效期

** 图片
上传到网站的图片,要压缩一下
图片打水印 论坛地址
论坛上传图片,返回图片连接
直接是markdown的格式
支持批量操作
图片外联,可以限制,只能cnode域名访问吗?或者限制外联的调用次数
避免被当作图床使用

** 视频
视频缩略图
根据不同网络,解析不同清晰度是视频网站功能,还是网站这边实现 

* 完善cnode现有回复功能
20180320_154903.png
回复中默认隐藏点赞,只有鼠标移动到回复箭头处,才显示点赞按钮

微信公众号文章中设置的,是显示这个点赞的小手的
可以只显示那个回复的箭头,当鼠标停留在回复区域时,当条回复,显示所有的回复类型

** 回复中引用,只显示直接引用内容
** 回复点赞

* 完善注册流程
这个时候技术水平也高了,可以做一些高级功能
放恶意注册
游客注册 邮箱接收验证码
发言注册 手机接收验证码

** 游客权限
* 使用手机号登录
临时登录
忘记密码

* 微信授权登录
这个需要企业账户
注册公司
公众号高级功能开发,也需要公司信息

* 发帖
发帖类型中,选择类型
分享
 设置积分.达到这个积分后,帖子会被设置成公开

* 链接自动转成短网址
https://cnodejs.org/topic/5aae829ff5dfc27d7ad98932
论坛中的连接自动转换成短网址
20180320_161118.png
短网址解析先用新浪的t.cn 之后不是复杂对性能要求不高的话,自己做

* 论坛管理功能完善
cnode现在已经有的
添加没有的
管理功能提供api

* 论坛等级系统
参考linux文件权限设置
用户权限 组权限 其他人权限

用户等级 等级划分

用户组

使用不同背景颜色来区分,管理 游客 注册会员,不使用图标,减少信息传输量 shied.io上这样设计

会员执行相关操作,帐号不满足相关权限.提示信息,这个需要的积分等级,开通指导,开通后,同时获得的权限清单

有问题@管理人员

* 分享
绑定自己的帐号key之外,可以分享到社区中
需要社区这边,抓取吗?
还是社交app中提供这样的调用接口
这个可以显示在人的动态中
类似于朋友圈功能
关系连在社区中

** 生成分享链接
** 生成分享二维码
手机上扫描就可以查看

** 分享到微信群
** 分享到朋友圈
* 积分系统
** 测试充值
** 测试支付
** 测试转账

* 裂变系统
每个注册用户都有自己唯一的标识码
邀请注册
分享时带有标识码参数

* 用户实名
调用阿里实名接口
* 完善用户个人中心
头像
主页
可选择填写 可选择显示
github的watch follow fork 
* 好友功能
参考微信 设置好友添加方式
设置新加好友朋友圈权限
* 私信
实名之后,就可以聊天,有真实的用户信息,基于信任的聊天.类似于微信那样
参考nodebb实现的聊天,websocket

* 打赏
开通接收打赏需要实名

* 回复中添加收藏功能
cnode中现在有收藏帖子功能,没有针对单个收藏内容回复

收藏类型 文字 图片 视频地址
自定义标签 类似于微信
每个人免费空间1G

收藏的文字可以编辑

* 收藏
收藏和rss类似,使用收藏相比rss,用户更好理解

** 订阅人
像知乎那样,可以看 他发布的 他回复的 

** 订阅主题
相关关键词的文章,会推送

** 订阅帖子
订阅这个帖子后续的回复更新

** 收藏楼层
这个默认启动

记录每个帖子上次浏览之后的位置,在标题后面,显示消息更新的数量
像微信群那样
可以选择忽略
默认是关闭的,rss当前帖子之后才会显示
这样可以降低服务器的压力

* 回复中添加举报功能
举报 

论坛的人,达到一定级别,可以对论坛中违规的人,进行扣分
根据所处的位置,自动下拉候选,扣分的理由
不同等级,扣分的权重不一样

这样全名监督,都个人都会有参与感
共同维护论坛的秩序
* 黑名单
json格式?

黑名单清单

帐号
状态
时间
理由
记录

* 回复中添加转发功能
* 回复中添加打赏功能
* 回复中添加匿名回复
只是其他人看不到,论坛后台还是可以看到真实的用户信息
用于责任追究

* 论坛UI
** 技术选型
pc
小程序
微信群中

使用vue
使用vue的原因

** 现在是翻页形式,改成feed流形式
* 调整回复帖子的样式
这个时候,vue使用比较熟练,可以定制高级的显示样式

回复 点赞 分享 订阅 匿名回复 收藏
分享,将这个文章分享到,社交网站上
可以定制自己常用的,之后的隐藏在"更多"中,点击可以选择
* 编辑器支持表情
按照微信中的
选择一些常用的表情
可以保存自定义表情,那种微信斗图的?
像 什么值得买那样,使用小的表情.又比微信那种emoji表情大一些
* 回复中添加表情
回复框中,可以选择表情

* 发帖中支持表情
* 发帖悬赏
有积分奖励的帖子,用红色赏字,标识一下.
显示在标题前面,后面标识上赏的金额?
 
* 发帖草稿功能
发表帖子或者回复 要有草稿功能

* 发帖支持markdown导入
每一个主题贴都是一个markdown文件
那些不使用markdown语法,使用默认网页编辑的帖子,还是和正常一样
只是为那些高级用户提供一个接口,可以用narkdown文件来发布帖子
方便自己版控,及时更新,维护.
可以将回复中的内容整合到正文中
使用nodejs做一个工具
选择文件,打开 md文件 
预览
发布
最后生成的也是html文档,可以将对应主题的html文档作为发布形式吗?
在本地导出html,上传到论坛

帖子中的图片,可以自己使用图床,或者直接拖拽到要显示的位置,自动返回markdown格式的链接

* 上传图片
* 拍照上传
* 二维码扫描功能
转账
识别

* lbs位置获取
方便组织线下活动
获取系统位置
使用系统自带地图功能显示

* 朋友圈
名字可以改成叫动态

实名认证后,开通
展示自己生活中的点滴和情感,参考微信朋友圈设计

微信是生活化的展示,必须是好友才能查看.这里的朋友圈是工作社交,小兴趣圈子的展示

隐私保护
发布时候的权限
仅作者自己可见
仅好友可见
3天 半年 可见

* 商城
** nodebbs插件
** nodebbs主题
** 怎么保证版权?
** 项目外包
* API完善
cnode现有功能

* 网站运行状态
显示网站运营数据
* 论坛机器人接口
使用机器人来处理日常工作
机器人调用bbs管理api
机器人管理算法
加精
置顶
警告
ban用户

与或非逻辑


https://forums.debiancn.org/t/topic/1355
论坛机器人
这个机器人有什么功能
cnode也做一个机器人

* 直播
知乎那种类似微信群语音形式,只能发送之后,其他人才能看到,互动性不好.
主持人和嘉宾可以同时说语音,其他人默认只能发文字,表情
授权之后,可以发语音
类似于荔枝FM那种,音频的
调用现成的腾讯云或者阿里云服务
打赏功能
分享接口
* 活动
类似于互动吧那种发起活动
活动介绍
报名
支付
互动群?微信群 这个可以放到论坛上吗?
活动赞助申请

场地合作申请
面向青年人的咖啡厅,吧
* 招聘
 招聘会自动按照时间天数来扣除.每天多少积分.每周 会有优惠
直到关闭招聘帖子
没有关闭,就认为是帖子还有效.
就可以投简历
* 网站镜像
国内一个 国外一个
访问速度,根据ip访问最近的镜像
备份一个出了问题,访问另一个





